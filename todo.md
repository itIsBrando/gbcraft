# Todo List


### Features
- [ ] Add vblank interrupt to copy `obj_t` to OAM
- [ ] Add `interrupt.h`
- [ ] Allow `bg_write_tile()` to accept coordinates greater than 32 for regular backgrounds
- [ ] Move tile rending functions into a new file, `render.c`/`.h`
- [ ] Create sub-classes for entity creation. ex: `ent_slime_add`
- [ ] Allow players to *interact* with entities, in addition to attack
- [ ] Add iron
- [ ] Add coal
- [ ] Add gold
- [ ] Add gem
- [ ] Add attack bonus for swords (and axes?)
- [ ] Add seed selection
- [ ] Add slime tile drop
- [ ] Add apple
- [ ] Add bonus damage to sword
- [ ] Add pickup tool sprite
- [ ] Add player swimming animation
- [ ] **Allow player to recieve damage**
- [ ] Add bread consumation
- [x] Add support for player healing
- [x] Add wood floor
- [x] Add bread
- [x] Add seeds
- [x] Add hoe
- [x] Add tiling
- [x] Add door sprite for the inventory!
- [x] Create stairs up
- [x] Create a door
- [x] Create a *hole* around the player's initial position so it will never get stuck in blocks
- [x] Create stairs down
- [x] Create generation for caves
- [x] Add player side sprite
- [x] Add player swimming
- [x] Add furnace
- [x] Enemy spawning
- [x] Add real player tracking to zombie
- [x] Saving
- [x] Loading
- [x] Main menu
- [x] Add chest
- [x] Add tile drops
- [x] Add `hotbar.h`
- [x] Add slime tile
- [x] Add slime entity
- [x] Subtract from stamina upon using a tool
- [x] Add player back sprite
- [x] Require block breaking to use multiple hits
- [x] Add stamina to hotbar
- [x] Replenish stamina over time
- [x] Add tree sprite
- [x] Add tree tile
- [x] Add crafting table
- [x] Add *powerglove*
- [x] Add pointer to player entity in `level_t`
- [x] Add `ent_remove(level_t *, ent_t *)`
- [x] Allow item crafting
- [x] Add `recipe_t`
- [x] Add terrain generation
- [x] Add supporting for `9pt indexing`
- [x] Add player's health to the hotbar
- [x] Add stone
- [x] Add axe
- [x] Add inventory GUI
- [x] Add the player's active item to the hotbar
- [x] prevent duplicates in inventory
- [x] Add `zombie_t`
- [x] Add `inventory_t`
- [x] Add `item_t`
- [x] Support large GBA mapping mode
- [x] change bg map to *affine* mapping
- [x] Add bounding rectangles for entities


### Polish
- [ ] Move & cleanup player's cursor sprite handling
- [ ] Prevent user from placing block on the tile that it occupies
- [ ] New tree sprite
- [ ] Scroll inventory items when list is too long
- [ ] Entity death animaton
- [ ] **Add indication that a tile is being destroyed**
- [ ] Fixed background colors and other paletting problems!!!!
- [ ] Create ALL sprites, that way we do not have to worry about any palettes!!!!
- [ ] Add door opening/closing sound effect
- [ ] Add mob spawning on lower levels
- [x] Furniture snap to grid?
- [x] Add inner-corner tiles for `9pt indexing`
- [x] Fix level changing. It is very sloppy
- [x] Animate player
- [x] Redo font
- [x] Have `spr_copy_all()` only copy the number of allocated sprites, not all 128
- [x] Document `onhurt` function for entity events. return value is true if entity died
- [x] Prevent enemies from spawning on top of water & other entities
- [x] Create a modified version of `ent_get_all` that uses the stack instead of the heap
- [x] Prevent furniture from being able to be placed in the water
- [x] Allow `A` button for exiting inventory
- [x] Hide entities that leave visible screen


### Bug
- [ ] Out-of-bounds placing tiles is weird
- [ ] Blocks can be placed on top of entities
- [ ] Blocks can be placed on top of player
- [ ] Furniture items can be placed on top of other furniture and entities
- [ ] `bg.h` does not support regular backgrounds with sizes larger than 32x32
- [ ] Random null pointer crash when ItemEntity exists on lower level
- [ ] Random crashes while spamming `A` and harvesting wheat
- [ ] Saving level in the underworld will corrupt save (likely cuz player is not in `world[0]`)
- [ ] Player placement after changing level is incorrect
- [ ] If a `player.is_swimming = true` when entering staircase, then stamina will continue to deplete
- [ ] Fix graphically remenants after closing chest
- [ ] Fix graphically remenants after closing crafting
- [x] Chest items are eaten upon saving and loading
- [x] Entities slightly offscreen will disappear
- [x] Opening a door after reentering the overworld crashes
- [x] Inventory cursor sprite disappears when on lower level (**WHY!!!**)
- [x] Player sprite disappears after switching levels (note this affect with a crafting table placed down)
- [x] Pointers decay after `ent_change_level` :'(
    - potential fix could be to add `onrelocate` function to the entity events. It would also help with saving/loading
- [x] Tiles rendered on lower levels do not render properly
- [x] Changing levels breaks the palettes for some reason. ugh
- [x] Grass does not connect to tree
- [x] Entities are visible above the hotbar
- [x] Entities are drawn above the hotbar
- [x] **Fix weird & fast zombie movement**
- [x] Weird & occasional screen shake when attacking with many mobs spawned
- [x] Opening a chest with no items in it caused a crash. Happened immediately following the opening of the crafting bench (*fixed*, caused by crafting/removing active item from player)
- [x] Crafting an item that was not actively held would not remove it from the inventory
- [x] Confirm functional collision with other entities
- [x] Pick up tool does not work
- [x] Cursor position does not line up with tile placement
- [x] Game crashes opening inventory menu with no items
- [x] Crafting cost sprites are not properly hidden when switching between items
- [x] `pick up` tool counts as a wood axe?!
- [x] Some sprites appear as ghosts on the menus
- [x] Crafting table does not open
- [x] Fix weird cursor positioning