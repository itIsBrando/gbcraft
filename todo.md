# Todo List


### Features
- [ ] Add vblank interrupt to copy `obj_t` to OAM
- [ ] Allow `bg_write_tile()` to accept coordinates greater than 32 for regular backgrounds
- [ ] Add gem
- [x] Add gem tools
- [ ] Add lava
- [ ] Add seed selection
- [ ] Add `how-to` & `controls` menu
- [ ] Add lantern lighting effect
- [ ] Add lantern sprite
- [ ] Use DMA transfers to copy sprites. They broke rn :'(
- [ ] Finish zombie AI
- [ ] Add dungeon generation??
- [x] Add levels are saved!
- [x] Add golden apple
- [x] Add gold
- [x] Create sub-classes for entity creation. ex: `ent_slime_add`
- [x] Move tile rending functions into a new file, `render.c`/`.h`
- [x] Rewrite `memcpy16` and `memset16` routines in assembly
- [x] Add slime tile drop
- [x] Add bonus damage to sword
- [x] Add pickup tool sprite
- [x] Add iron tools
- [x] Add apple
- [x] Add iron
- [x] Add lighting to caves
- [x] Add player swimming animation
- [x] Add bread consumation
- [x] Add coal
- [x] **Allow player to recieve damage**
- [x] Add support for player healing
- [x] Add wood floor
- [x] Add bread
- [x] Add seeds
- [x] Add hoe
- [x] Add tiling
- [x] Add door sprite for the inventory!
- [x] Create stairs up
- [x] Create a door
- [x] Create a *hole* around the player's initial position so it will never get stuck in blocks
- [x] Create stairs down
- [x] Create generation for caves
- [x] Add player side sprite
- [x] Add player swimming
- [x] Add furnace
- [x] Enemy spawning
- [x] Add real player tracking to zombie
- [x] Saving
- [x] Loading
- [x] Main menu
- [x] Add chest
- [x] Add tile drops
- [x] Add `hotbar.h`
- [x] Add slime tile
- [x] Add slime entity
- [x] Subtract from stamina upon using a tool
- [x] Add player back sprite
- [x] Require block breaking to use multiple hits
- [x] Add stamina to hotbar
- [x] Replenish stamina over time
- [x] Add tree sprite
- [x] Add tree tile
- [x] Add crafting table
- [x] Add *powerglove*
- [x] Add pointer to player entity in `level_t`
- [x] Add `ent_remove(level_t *, ent_t *)`
- [x] Allow item crafting
- [x] Add `recipe_t`
- [x] Add terrain generation
- [x] Add supporting for `9pt indexing`
- [x] Add player's health to the hotbar
- [x] Add stone
- [x] Add axe
- [x] Add inventory GUI
- [x] Add the player's active item to the hotbar
- [x] prevent duplicates in inventory
- [x] Add `zombie_t`
- [x] Add `inventory_t`
- [x] Add `item_t`
- [x] Support large GBA mapping mode
- [x] change bg map to *affine* mapping
- [x] Add bounding rectangles for entities


### Polish
- [ ] New tree sprite
- [ ] Scroll inventory items when list is too long
- [ ] Entity death animaton
- [x] **Add indication that a tile is being destroyed**
- [ ] ^ Hitting indication does not appear when no active item is present
- [ ] Fixed background colors and other paletting problems!!!!
- [ ] Create ALL sprites, that way we do not have to worry about any palettes!!!!
- [ ] Add door opening/closing sound effect
- [ ] Inform user on why they cannot remove their chest
- [x] Chests can wrongly be picked up with items in it
- [ ] Add pause menu
- [x] Hide player's cursor when a menu is opened
- [ ] Add player hitting sound
- [ ] Inhibit player movement during hit time
- [x] Add bound checking to inventories
- [x] Add bound checking to entity tables
- [x] Have `failed checksum` error return user to main menu, rather than brute-force a error-bound load
- [x] Add border around in-game menus
- [x] change `player.activeItem` to be an index to item rather than pointer
- [x] Change `ent_maypass` to a `bool` rather than a costly function calls
- [x] Add player death
- [x] **Cover up ugly map overflow**
- [x] Allow wood floor to be broken with axe
- [x] Allow doors to be broken with axe
- [x] Tiles can be interacted with even with an item in hand
- [x] Move & cleanup player's cursor sprite handling
- [x] Add mob spawning on lower levels
- [x] Furniture snap to grid?
- [x] Add inner-corner tiles for `9pt indexing`
- [x] Fix level changing. It is very sloppy
- [x] Animate player
- [x] Redo font
- [x] Have `spr_copy_all()` only copy the number of allocated sprites, not all 128
- [x] Document `onhurt` function for entity events. return value is true if entity died
- [x] Prevent enemies from spawning on top of water & other entities
- [x] Create a modified version of `ent_get_all` that uses the stack instead of the heap
- [x] Prevent furniture from being able to be placed in the water
- [x] Allow `A` button for exiting inventory
- [x] Hide entities that leave visible screen


### Bug
- [ ] Blocks can be placed on top of entities
- [ ] Blocks can be placed on top of player
- [ ] `bg.h` does not support regular backgrounds with sizes larger than 32x32
- [ ] Item entities do not have proper sprite sizes when level changes
- [x] Inventory cursor does not show up after entering lower level
- [ ] **Saving level in the underworld will corrupt save (likely cuz player is not in `world[0]`)**
- [ ] Swimming animation is messed up when player spawns in water
- [ ] Random crashes while spamming `A` and harvesting wheat
- [ ] Crashes after picking up live item entity when stairs are used
- [ ] **THE POINTERS OF A CHEST'S INVENTORY WILL CHANGE IF `ent_remove` IS CALLED. \*GAME BREAKING!!!\***
- [x] After changing level, items do not get removed from inventory, instead the count underflows
- [x] Random null pointer crash when ItemEntity exists on lower level
- [x] Out-of-bounds placing tiles is weird
- [x] Entity removal causes player entity to be overriden. POINTER TO PLAYER CHANGES WHEN ENTITIES ARE REMOVED SO THE POINTER TO THE PLAYER WILL BE ANOTHER ENTITY OR OUTSIDE VIABLE RANGE.
- [x] Fix graphically remenants after closing chest
- [x] Fix graphically remenants after closing crafting
- [x] Furniture items can be placed on top of other furniture and entities
- [x] Entity removal crashes game occasionally
- [x] Using any staircase other than the first one causes major bugs and results in a crash (opening inventory crashes)
- [x] If a `player.is_swimming = true` when entering staircase, then stamina will continue to deplete
- [x] Player placement after changing level is incorrect
- [x] Chest items are eaten upon saving and loading
- [x] Entities slightly offscreen will disappear
- [x] Opening a door after reentering the overworld crashes
- [x] Inventory cursor sprite disappears when on lower level (**WHY!!!**)
- [x] Player sprite disappears after switching levels (note this affect with a crafting table placed down)
- [x] Pointers decay after `ent_change_level` :'(
    - potential fix could be to add `onrelocate` function to the entity events. It would also help with saving/loading
- [x] Tiles rendered on lower levels do not render properly
- [x] Changing levels breaks the palettes for some reason. ugh
- [x] Grass does not connect to tree
- [x] Entities are visible above the hotbar
- [x] Entities are drawn above the hotbar
- [x] **Fix weird & fast zombie movement**
- [x] Weird & occasional screen shake when attacking with many mobs spawned
- [x] Opening a chest with no items in it caused a crash. Happened immediately following the opening of the crafting bench (*fixed*, caused by crafting/removing active item from player)
- [x] Crafting an item that was not actively held would not remove it from the inventory
- [x] Confirm functional collision with other entities
- [x] Pick up tool does not work
- [x] Cursor position does not line up with tile placement
- [x] Game crashes opening inventory menu with no items
- [x] Crafting cost sprites are not properly hidden when switching between items
- [x] `pick up` tool counts as a wood axe?!
- [x] Some sprites appear as ghosts on the menus
- [x] Crafting table does not open
- [x] Fix weird cursor positioning